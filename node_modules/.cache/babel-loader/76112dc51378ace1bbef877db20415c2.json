{"ast":null,"code":"import _slicedToArray from\"/Users/jeanbapt-sanchez/Documents/school/bddi-2020/gobelins-2020/Semaine-8-9/BDDI_MonPtitMusee/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import Bg from'../../assets/img/01_Image/sol_et_fond.png';import Armoire from'../../assets/img/01_Image/armoire.png';import Flowers from'../../assets/img/01_Image/plan_horizontal.png';import Table from'../../assets/img/01_Image/table.png';import Cadre from\"../../assets/img/01_Image/cadre_photo.svg\";import Visage from'../../assets/img/01_Image/visage-seul-1.gif';import VisageParle from'../../assets/animations-vid/visage-one-loop.gif';import Shake from'../../assets/gestures/geste_shake.gif';import AudioS1 from'../../assets/audio/scene1.mp3';import AudioS2 from'../../assets/audio/image_qui_parle.mp3';import'./styles/SceneLivre.css';import{useEffect,useRef,useState}from'react';import Boussole from\"../../assets/gestures/boussole-02.svg\";import FlecheBoussole from\"../../assets/gestures/boussole-03.svg\";import{Redirect}from\"react-router-dom\";var SceneLivre=function SceneLivre(props){var bodySceneLivre=useRef(null);var armoirRef=useRef(null);var fleursRef=useRef(null);var tableRef=useRef(null);var shakeRef=useRef(null);var audioRef=useRef(null);var audioRef2=useRef(null);var boussoleRef=useRef(null);var flecheBoussoleRef=useRef(null);var visageRef=useRef(null);var cadreRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),gestureIsDisplay=_useState2[0],setGestureIsDisplay=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),compassIsDisplay=_useState4[0],setCompassIsDisplay=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];useEffect(function(){setTimeout(function(){bodySceneLivre.current.style.opacity=.5;armoirRef.current.style.right='0';fleursRef.current.style.top='25%';tableRef.current.style.bottom='7%';cadreRef.current.style.bottom='40%';},1000);// TO DO : Implémenter le nombre de seconde de la durée de la première voix : TIMEOUT à 25000\nsetTimeout(function(){setGestureIsDisplay(true);shakeRef.current.style.opacity=1;runSecousse();},2000);// window.addEventListener('scroll', noScroll);\n},[]);useEffect(function(){// console.log('mon mute :', props.isVoice)\nif(props.isVoice===true&&audioRef.current.currentTime<1){props.soundEffect.src=AudioS1;// props.soundEffect.play()\n}// props.soundEffectplay()\n// } else if (props.isVoice === false){\n//     // console.log('stop ', props.soundEffect )\n//     props.soundEffect.pause()\n// } else if (props.isVoice === true && props.soundEffect.currentTime > 1){\n//     // audioRef2.current.play()\n// } else if (props.soundEffect.currentTime > 1){\n//     props.soundEffect.pause()\n//     // audioRef2.current.pause()\n// }\n},[props.isVoice,props.soundEffect]);var runSecousse=function runSecousse(){try{window.addEventListener('devicemotion',callBackSecousse,true);}catch(e){console.log('erreur',e);}};var runBoussole=function runBoussole(){if(window.DeviceOrientationEvent){// Listen for the deviceorientation event and handle the raw data\nwindow.addEventListener('deviceorientation',callBackBoussole,true);}};var progressionFaceDisplaying=0;var callBackSecousse=function callBackSecousse(event){console.log('callBackSecousse se lance');console.log(progressionFaceDisplaying);if(event.acceleration.y>25){progressionFaceDisplaying++;console.log(progressionFaceDisplaying);visageRef.current.style.opacity=progressionFaceDisplaying/10;}if(progressionFaceDisplaying>=10){window.removeEventListener('devicemotion',callBackSecousse,true);bodySceneLivre.current.style.opacity=1;}else if(progressionFaceDisplaying===2){setGestureIsDisplay(false);}};var callBackBoussole=function callBackBoussole(event){var compassdir;if(event.webkitCompassHeading){// Apple works only with this, alpha doesn't work\ncompassdir=event.webkitCompassHeading;// console.log(compassdir)\n}else compassdir=event.alpha;compassdir=-compassdir;boussoleRef.current.style.transform=\"rotate(\".concat(compassdir,\"deg)\");// console.log(boussole.style.transform)\nif(-compassdir>179&&-compassdir<181){boussoleRef.current.style.opacity=0;flecheBoussoleRef.current.style.opacity=0;bodySceneLivre.current.style.opacity=1;window.removeEventListener('deviceorientation',callBackBoussole,true);bodySceneLivre.current.style.opacity=0;setTimeout(function(){setRedirect('/experience/indoor/scene/2');},1000);// TODO : Déclencher l'animation \nconsole.log('DECLENCHED ANINMATION');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-screen fixed\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:bodySceneLivre,className:\"body w-full h-screen  overflow-x-hidden transition-opacity duration-700 ease-in-out\",children:[/*#__PURE__*/_jsx(\"img\",{src:Bg,alt:\"background\",className:\"w-screen h-screen\"}),/*#__PURE__*/_jsx(\"img\",{ref:armoirRef,src:Armoire,alt:\"armoire\",className:\"z-1 w-5/12 -top-2 -right-40 transition duration-700 ease-in-out\"}),/*#__PURE__*/_jsx(\"img\",{ref:fleursRef,src:Flowers,alt:\"fleurs\",className:\"fleurs -top-2/3\"}),/*#__PURE__*/_jsx(\"img\",{ref:tableRef,src:Table,alt:\"table\",className:\"z-10 -bottom-80\"}),/*#__PURE__*/_jsx(\"img\",{src:Cadre,ref:cadreRef,alt:\"cadre\",className:\"cadre w-1/2 z-10 left-1/4 -bottom-80\"}),/*#__PURE__*/_jsx(\"img\",{src:Visage,ref:visageRef,onClick:function onClick(){visageRef.current.src=VisageParle;props.soundEffect.src=AudioS2;console.log('play');props.soundEffect.play();// TO DO : Lancer le son et l'animation du visage\nvar interval=setInterval(function(){if(props.soundEffect.currentTime>14.5){setTimeout(function(){setCompassIsDisplay(true);console.log('boussole ok');console.log(compassIsDisplay);bodySceneLivre.current.style.opacity=.5;boussoleRef.current.style.opacity=1;flecheBoussoleRef.current.style.opacity=1;runBoussole();},1000);clearInterval(interval);}},500);},alt:\"visage\",className:\"visage mb-20 z-10 bottom-60 left-1/4 opacity-0\"}),/*#__PURE__*/_jsxs(\"audio\",{ref:audioRef,src:AudioS1,children:[\"Your browser does not support the\",/*#__PURE__*/_jsx(\"code\",{children:\"audio\"}),\" element.\"]}),/*#__PURE__*/_jsxs(\"audio\",{ref:audioRef2,src:AudioS2,children:[\"Your browser does not support the\",/*#__PURE__*/_jsx(\"code\",{children:\"audio\"}),\" element.\"]})]}),gestureIsDisplay&&/*#__PURE__*/_jsx(\"img\",{ref:shakeRef,src:Shake,alt:\"shake\",className:\"anim absolute top-0 opacity-0 z-50\"}),compassIsDisplay&&/*#__PURE__*/_jsx(\"img\",{ref:boussoleRef,src:Boussole,className:\"w-40 absolute transform left-1/3  top-1/3 opacity-0 transition-opacity duration-500 ease-in-out\",alt:\"fleche boussole\"}),compassIsDisplay&&/*#__PURE__*/_jsx(\"img\",{ref:flecheBoussoleRef,src:FlecheBoussole,className:\"w-20 absolute left-1/3 ml-10 mb-2 transform rotate-180 top-1/4 opacity-0 transition-opacity duration-500 ease-in-out\",alt:\"fleche boussole\"}),redirect&&/*#__PURE__*/_jsx(Redirect,{to:redirect})]});};export default SceneLivre;","map":{"version":3,"sources":["/Users/jeanbapt-sanchez/Documents/school/bddi-2020/gobelins-2020/Semaine-8-9/BDDI_MonPtitMusee/src/components/Scenes/SceneLivre.js"],"names":["Bg","Armoire","Flowers","Table","Visage","VisageParle","Shake","AudioS1","AudioS2","useEffect","useRef","useState","Redirect","SceneLivre","props","bodySceneLivre","armoirRef","fleursRef","tableRef","shakeRef","audioRef","audioRef2","boussoleRef","flecheBoussoleRef","visageRef","cadreRef","gestureIsDisplay","setGestureIsDisplay","compassIsDisplay","setCompassIsDisplay","redirect","setRedirect","setTimeout","current","style","opacity","right","top","bottom","runSecousse","isVoice","currentTime","soundEffect","src","window","addEventListener","callBackSecousse","e","console","log","runBoussole","DeviceOrientationEvent","callBackBoussole","progressionFaceDisplaying","event","acceleration","y","removeEventListener","compassdir","webkitCompassHeading","alpha","transform","Cadre","play","interval","setInterval","clearInterval","Boussole","FlecheBoussole"],"mappings":"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","sourcesContent":["import Bg from '../../assets/img/01_Image/sol_et_fond.png'\nimport Armoire from '../../assets/img/01_Image/armoire.png'\nimport Flowers from '../../assets/img/01_Image/plan_horizontal.png'\nimport Table from '../../assets/img/01_Image/table.png'\nimport Cadre from '../../assets/img/01_Image/cadre_photo.svg'\nimport Visage from '../../assets/img/01_Image/visage-seul-1.gif'\nimport VisageParle from '../../assets/animations-vid/visage-one-loop.gif'\nimport Shake from '../../assets/gestures/geste_shake.gif'\nimport AudioS1 from '../../assets/audio/scene1.mp3'\nimport AudioS2 from '../../assets/audio/image_qui_parle.mp3'\nimport './styles/SceneLivre.css'\nimport { useEffect, useRef, useState } from 'react'\nimport Boussole from '../../assets/gestures/boussole-02.svg'\nimport FlecheBoussole from '../../assets/gestures/boussole-03.svg'\nimport { Redirect } from \"react-router-dom\";\n\nconst SceneLivre = (props) => {\n    let bodySceneLivre = useRef(null)\n    let armoirRef = useRef(null)\n    let fleursRef = useRef(null)\n    let tableRef = useRef(null)\n    let shakeRef = useRef(null)\n    let audioRef = useRef(null)\n    let audioRef2 = useRef(null)\n    let boussoleRef = useRef(null)\n    let flecheBoussoleRef = useRef(null)\n    let visageRef = useRef(null)\n    let cadreRef = useRef(null)\n\n    let [gestureIsDisplay, setGestureIsDisplay] = useState(false)\n    let [compassIsDisplay, setCompassIsDisplay] = useState(false)\n    let [redirect, setRedirect] = useState(null)\n\n    useEffect(() => {\n        setTimeout(() => {\n            bodySceneLivre.current.style.opacity = .5\n            armoirRef.current.style.right = '0'\n            fleursRef.current.style.top = '25%'\n            tableRef.current.style.bottom = '7%'\n            cadreRef.current.style.bottom = '40%'\n        }, 1000)\n        \n        // TO DO : Implémenter le nombre de seconde de la durée de la première voix : TIMEOUT à 25000\n        setTimeout(() => {\n            setGestureIsDisplay(true)\n            shakeRef.current.style.opacity = 1\n            runSecousse()\n        }, 2000)\n        // window.addEventListener('scroll', noScroll);\n    }, [])\n\n    useEffect(() => {\n        // console.log('mon mute :', props.isVoice)\n        if(props.isVoice === true && audioRef.current.currentTime < 1){\n            props.soundEffect.src = AudioS1\n            // props.soundEffect.play()\n        }\n\n        // props.soundEffectplay()\n        // } else if (props.isVoice === false){\n        //     // console.log('stop ', props.soundEffect )\n        //     props.soundEffect.pause()\n        // } else if (props.isVoice === true && props.soundEffect.currentTime > 1){\n        //     // audioRef2.current.play()\n        // } else if (props.soundEffect.currentTime > 1){\n        //     props.soundEffect.pause()\n        //     // audioRef2.current.pause()\n        // }\n    }, [props.isVoice, props.soundEffect])\n\n    const runSecousse = () => {\n        try{\n            window.addEventListener('devicemotion', callBackSecousse, true);\n        } catch (e){\n            console.log('erreur', e)\n        }\n    }\n\n    const runBoussole = () => {\n        if (window.DeviceOrientationEvent) {\n            // Listen for the deviceorientation event and handle the raw data\n            window.addEventListener('deviceorientation', callBackBoussole, true);\n        }\n    }\n\n    let progressionFaceDisplaying = 0\n    const callBackSecousse = (event) => {\n        console.log('callBackSecousse se lance')\n            console.log(progressionFaceDisplaying)\n            if(event.acceleration.y > 25){\n                progressionFaceDisplaying++\n                console.log(progressionFaceDisplaying)\n\n                visageRef.current.style.opacity = progressionFaceDisplaying / 10\n            }\n            if(progressionFaceDisplaying >= 10){\n                window.removeEventListener('devicemotion', callBackSecousse, true)\n                bodySceneLivre.current.style.opacity = 1\n\n            } else if (progressionFaceDisplaying === 2){\n                setGestureIsDisplay(false)\n            }\n    }\n\n    const callBackBoussole = (event) => {\n            let compassdir;\n\n            if(event.webkitCompassHeading) {\n                // Apple works only with this, alpha doesn't work\n                compassdir = event.webkitCompassHeading;  \n                // console.log(compassdir)\n            }\n            else compassdir = event.alpha;\n\n            compassdir = -compassdir\n            boussoleRef.current.style.transform = `rotate(${compassdir}deg)`\n            // console.log(boussole.style.transform)\n            if(-compassdir > 179 && -compassdir < 181){\n                boussoleRef.current.style.opacity = 0\n                flecheBoussoleRef.current.style.opacity = 0\n                bodySceneLivre.current.style.opacity = 1\n                window.removeEventListener('deviceorientation', callBackBoussole, true)\n                bodySceneLivre.current.style.opacity = 0\n                setTimeout(() => {\n                    setRedirect('/experience/indoor/scene/2')\n                }, 1000)\n                // TODO : Déclencher l'animation \n                console.log('DECLENCHED ANINMATION')\n            }\n        }\n\n    return(\n        <div className=\"w-full h-screen fixed\">\n            <div ref={bodySceneLivre} className=\"body w-full h-screen  overflow-x-hidden transition-opacity duration-700 ease-in-out\">\n                <img src={Bg} alt=\"background\" className=\"w-screen h-screen\"/>\n                <img ref={armoirRef} src={Armoire} alt=\"armoire\" className=\"z-1 w-5/12 -top-2 -right-40 transition duration-700 ease-in-out\"></img>\n                <img ref={fleursRef} src={Flowers} alt=\"fleurs\" className=\"fleurs -top-2/3\"/>\n                <img ref={tableRef} src={Table} alt=\"table\" className=\"z-10 -bottom-80\"/>\n                <img src={Cadre} ref={cadreRef} alt=\"cadre\" className=\"cadre w-1/2 z-10 left-1/4 -bottom-80\"/>\n                <img src={Visage} ref={visageRef} onClick={() => {\n                    visageRef.current.src = VisageParle\n                    props.soundEffect.src = AudioS2\n                    console.log('play')\n                    props.soundEffect.play()\n                    // TO DO : Lancer le son et l'animation du visage\n\n                    const interval = setInterval(() => {\n                        if(props.soundEffect.currentTime > 14.5){\n                            setTimeout(() => {\n                                setCompassIsDisplay(true)\n                                console.log('boussole ok')\n                                console.log(compassIsDisplay)\n                                bodySceneLivre.current.style.opacity = .5\n                                boussoleRef.current.style.opacity = 1\n                                flecheBoussoleRef.current.style.opacity = 1\n                                runBoussole()\n                            }, 1000)\n                            clearInterval(interval)\n                        }\n                    }, 500)\n                }} alt=\"visage\" className=\"visage mb-20 z-10 bottom-60 left-1/4 opacity-0\"/>\n                {/* <img src={Cadre} alt=\"Cadre Obey\" className=\"bottom-0 z-10\"/> */}\n\n                <audio ref={audioRef}\n                    src={AudioS1}>\n                        Your browser does not support the\n                        <code>audio</code> element.\n                </audio>\n                <audio ref={audioRef2}\n                    src={AudioS2}>\n                        Your browser does not support the\n                        <code>audio</code> element.\n                </audio>\n\n            </div>\n            {/* <button className=\"bottom-0 disa absolute\" onClick={() => {\n                    setProgressionFaceDisplaying(10)\n                    // Là je lance dans x secondes l'indication gesture qu'il faut tourner son téléphone vers le su\n\n                    audioRef2.current.play()\n                }\n                    }>Quitter le shake</button> */}\n            {gestureIsDisplay && <img ref={shakeRef} src={Shake} alt=\"shake\" className=\"anim absolute top-0 opacity-0 z-50\"/>}\n            {compassIsDisplay && <img ref={boussoleRef} src={Boussole} className=\"w-40 absolute transform left-1/3  top-1/3 opacity-0 transition-opacity duration-500 ease-in-out\" alt=\"fleche boussole\" />}\n            {compassIsDisplay && <img ref={flecheBoussoleRef} src={FlecheBoussole} className=\"w-20 absolute left-1/3 ml-10 mb-2 transform rotate-180 top-1/4 opacity-0 transition-opacity duration-500 ease-in-out\" alt=\"fleche boussole\" />}\n\n            {redirect && <Redirect to={redirect} />}\n        </div>\n        \n    )\n}\n\nexport default SceneLivre;\n"]},"metadata":{},"sourceType":"module"}